{"data":{"markdownRemark":{"html":"<div class=\"content\">\n<p>Kurssin seitsemännessä osassa on luvun <a href=\"/osa7/react_router\">React router</a> kolmen tehtävän lisäksi 19 tehtävää, joissa jatketaan osissa 4 ja 5 tehtyä Bloglist-sovellusta.  Osa seuraavassa olevista tehtävistä on toisistaan riippumattomia \"featureita\", eli tehtäviä ei tarvitse tehdä järjestyksessä, voit jättää osan aivan hyvin toteuttamatta.</p>\n<p>Voit ottaa pohjaksi oman sovelluksesi sijaan myös mallivastauksen koodin.</p>\n<p>Useimmat tämän osan tehtävistä vaativat olemassaolevan koodin refaktoroimista. Tämä on tilanne käytännössä aina sovelluksia laajennettaessa, eli vaikka refaktorointi voi olla hankalaa ja ikävääkin, on kyseessä oleellinen taito.</p>\n<p>Hyvä neuvo niin refaktorointiin kuin uudenkin koodin kirjoittamiseen on <i>pienissä askelissa eteneminen</i>, koodia ei kannata hajottaa totaalisesti refaktorointia tehdessä pitkäksi aikaa, se on käytännössä varma resepti hermojen menettämiseen.</p>\n</div>\n<div class=\"tasks\">\n<h3>Tehtäviä</h3>\n<h4>7.4: redux, step1</h4>\n<p>Siirry käyttämään React-komponenttien tilan eli sijaan Reduxia.</p>\n<p>Muuta tässä tehtävässä notifikaatio käyttämään Reduxia.</p>\n<h4>7.5 redux, step2</h4>\n<p>Siirrä blogien tietojen talletus Reduxiin.</p>\n<p>Kirjautumisen ja uden blogin luomisen lomakkeiden tilaa voit halutessasi hallita edelleen Reactin tilan avulla. </p>\n<p>Tämä ja seuraava osa ovat kohtuullisen työläitä, mutta erittäin opettavaisia.</p>\n<h4>7.6 redux, step3</h4>\n<p>Siirrä myös kirjautuneen käyttäjän tietojen talletus Reduxiin.</p>\n<h4>7.7 käyttäjien näkymä</h4>\n<p>Tee sovellukseen näkymä, joka näyttää kaikkiin käyttäjiin liittyvät perustietot:</p>\n<picture><img src=\"/static/84f414833029834ab295d900b4506288/14be6/41.png\" srcset=\"/static/84f414833029834ab295d900b4506288/4cce7/41.png 200w,\n/static/84f414833029834ab295d900b4506288/bae5f/41.png 400w,\n/static/84f414833029834ab295d900b4506288/14be6/41.png 800w,\n/static/84f414833029834ab295d900b4506288/1b35a/41.png 1200w,\n/static/84f414833029834ab295d900b4506288/c6ea5/41.png 1506w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>7.8 yksittäisen käyttäjän näkymä, step1</h4>\n<p>Tee sovellukseen yksittäisen käyttäjän näkymä, jolta selviää mm. käyttäjän lisäämät blogit</p>\n<picture><img src=\"/static/734b72fb3dbef4f7aea9d59792deefbb/14be6/44.png\" srcset=\"/static/734b72fb3dbef4f7aea9d59792deefbb/4cce7/44.png 200w,\n/static/734b72fb3dbef4f7aea9d59792deefbb/bae5f/44.png 400w,\n/static/734b72fb3dbef4f7aea9d59792deefbb/14be6/44.png 800w,\n/static/734b72fb3dbef4f7aea9d59792deefbb/1b35a/44.png 1200w,\n/static/734b72fb3dbef4f7aea9d59792deefbb/9ee03/44.png 1600w,\n/static/734b72fb3dbef4f7aea9d59792deefbb/cd30b/44.png 1646w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Näkymään päästään klikkaamalla nimeä kaikkien käyttäjien näkymästä</p>\n<picture><img src=\"/static/5b65931c400b7b6ffb12f98292443ca7/14be6/43.png\" srcset=\"/static/5b65931c400b7b6ffb12f98292443ca7/4cce7/43.png 200w,\n/static/5b65931c400b7b6ffb12f98292443ca7/bae5f/43.png 400w,\n/static/5b65931c400b7b6ffb12f98292443ca7/14be6/43.png 800w,\n/static/5b65931c400b7b6ffb12f98292443ca7/1b35a/43.png 1200w,\n/static/5b65931c400b7b6ffb12f98292443ca7/9ee03/43.png 1600w,\n/static/5b65931c400b7b6ffb12f98292443ca7/489e3/43.png 1640w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p><i><strong>Huom1:</strong></i> jos sovelluksesi käyttää tilanhallintan Reduxia saattaa tässä tehtävässä olla hyödyksi käyttää funktion <em>mapStateToProps</em> toista parametria <a href=\"https://react-redux.js.org/api/connect#mapstatetoprops-state-ownprops-object\">ownPropsia</a>, joka on dokumentaation hienoisesta kryptisyydestä huolimatta aika <a href=\"https://stackoverflow.com/questions/41198842/what-is-the-use-of-the-ownprops-arg-in-mapstatetoprops-and-mapdispatchtoprops\">helppokäyttöinen</a>.</p>\n<p><i><strong>Huom2:</strong></i> törmäät tätä tehtävää tehdessäsi lähes varmasti seuraavaan virheeseen</p>\n<picture><img src=\"/static/5c5e8ab02a9e0d048b92e1a7f57f3fd7/14be6/42a.png\" srcset=\"/static/5c5e8ab02a9e0d048b92e1a7f57f3fd7/4cce7/42a.png 200w,\n/static/5c5e8ab02a9e0d048b92e1a7f57f3fd7/bae5f/42a.png 400w,\n/static/5c5e8ab02a9e0d048b92e1a7f57f3fd7/14be6/42a.png 800w,\n/static/5c5e8ab02a9e0d048b92e1a7f57f3fd7/1b35a/42a.png 1200w,\n/static/5c5e8ab02a9e0d048b92e1a7f57f3fd7/9ee03/42a.png 1600w,\n/static/5c5e8ab02a9e0d048b92e1a7f57f3fd7/3a631/42a.png 1648w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>vika ilmenee jos uudelleenlataat sivun ollessasi yksittäisen käyttäjän sivulla. </p>\n<p>Vian syynä on se, että jos mennään suoraan jonkin käyttäjän sivulle, eivät käyttäjien tiedot ole vielä ehtineet palvelimelta React-sovellukseen. Ongelman voi kiertää ehdollisella renderöinnillä esim. seuraavasti:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">User</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// hightlight-start</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> props<span class=\"token punctuation\">.</span>user <span class=\"token operator\">===</span> undefined<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// hightlight-end</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span>added blogs<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span>\n      <span class=\"token comment\">// ...</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>7.10 yksittäisen käyttäjän näkymä step2</h4>\n<p>Merkkaa tämä tehtävä tehdyksi jos toteuttamasi yksittäisen käyttäjän näkymä toimii oikein myös siinä tilanteessa että menet urliin suoraan tai refreshaat selaimen ollessasi käyttäjän näkymässä.</p>\n<h4>7.5 redux, step2</h4>\n<p>Siirrä kaikkien käyttäjien tietojen talletus Reduxiin. </p>\n<p>Tässä tehtävässä saattaa olla hyödyksi käyttää metodin <i>mapStateToProps</i> toista parametria\n<a href=\"https://github.com/reactjs/react-redux/blob/master/docs/api.md#inject-todos-of-a-specific-user-depending-on-props\">ownPropsia</a> joka on dokumentaation hienoisesta kryptisyydestä huolimatta <a href=\"https://stackoverflow.com/questions/41198842/what-is-the-use-of-the-ownprops-arg-in-mapstatetoprops-and-mapdispatchtoprops\">aika simppeli</a> asia.</p>\n<h4>7.11 blogin näkymä</h4>\n<p>Toteuta sovellukseen oma näkymä yksittäisille blogeille. Näkymä voi näyttää seuraavalta</p>\n<picture><img src=\"/static/a85c903712b5ebe500930720f0b2316c/14be6/49.png\" srcset=\"/static/a85c903712b5ebe500930720f0b2316c/4cce7/49.png 200w,\n/static/a85c903712b5ebe500930720f0b2316c/bae5f/49.png 400w,\n/static/a85c903712b5ebe500930720f0b2316c/14be6/49.png 800w,\n/static/a85c903712b5ebe500930720f0b2316c/1b35a/49.png 1200w,\n/static/a85c903712b5ebe500930720f0b2316c/599a8/49.png 1592w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Näkymään päästään klikkaamalla blogin nimeä kaikkien blogien näkymästä</p>\n<picture><img src=\"/static/ab884136111f509ba8330fcd0ef1d7e9/14be6/50.png\" srcset=\"/static/ab884136111f509ba8330fcd0ef1d7e9/4cce7/50.png 200w,\n/static/ab884136111f509ba8330fcd0ef1d7e9/bae5f/50.png 400w,\n/static/ab884136111f509ba8330fcd0ef1d7e9/14be6/50.png 800w,\n/static/ab884136111f509ba8330fcd0ef1d7e9/1b35a/50.png 1200w,\n/static/ab884136111f509ba8330fcd0ef1d7e9/60a0f/50.png 1512w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Tämän tehtävän jälkeen tehtävässä 5.6 toteutettua toiminnallisuutta ei enää tarvita, eli kaikkien blogien näkymässä yksittäisten blogien detaljien ei enää tarvitse avautua klikatessa.</p>\n<h4>7.12 navigointi</h4>\n<p>Tee sovellukseen navigaatiomenu</p>\n<picture><img src=\"/static/61b9b7b158c7b1895b882a0427473731/14be6/56.png\" srcset=\"/static/61b9b7b158c7b1895b882a0427473731/4cce7/56.png 200w,\n/static/61b9b7b158c7b1895b882a0427473731/bae5f/56.png 400w,\n/static/61b9b7b158c7b1895b882a0427473731/14be6/56.png 800w,\n/static/61b9b7b158c7b1895b882a0427473731/1b35a/56.png 1200w,\n/static/61b9b7b158c7b1895b882a0427473731/9ee03/56.png 1600w,\n/static/61b9b7b158c7b1895b882a0427473731/a39b6/56.png 1686w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>7.13 kommentit, step1</h4>\n<p>Tee sovellukseen mahdollisuus blogien kommentointiin:</p>\n<picture><img src=\"/static/ecb69ce27d03364ff3cafaa33c09771e/14be6/51.png\" srcset=\"/static/ecb69ce27d03364ff3cafaa33c09771e/4cce7/51.png 200w,\n/static/ecb69ce27d03364ff3cafaa33c09771e/bae5f/51.png 400w,\n/static/ecb69ce27d03364ff3cafaa33c09771e/14be6/51.png 800w,\n/static/ecb69ce27d03364ff3cafaa33c09771e/1b35a/51.png 1200w,\n/static/ecb69ce27d03364ff3cafaa33c09771e/9ee03/51.png 1600w,\n/static/ecb69ce27d03364ff3cafaa33c09771e/4ba44/51.png 1660w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Kommentit ovat anonyymejä, eli ne eivät liity järjestelmän käyttäjiin.</p>\n<p>Tässä tehtävässä riittää, että frontend osaa näyttää blogilla olevat backendin kautta lisätyt kommentit.</p>\n<p>Sopiva rajapinta kommentin luomiseen on osoitteeseen <i>api/blogs/:id/comments</i> tapahtuva HTTP POST -pyyntö.</p>\n<h4>7.14 kommentit, step2</h4>\n<p>Laajenna sovellusta siten, että kommentointi onnistuu frontendista käsin:</p>\n<picture><img src=\"/static/36e68117c0ec77a08ca1ff2352fef164/14be6/52.png\" srcset=\"/static/36e68117c0ec77a08ca1ff2352fef164/4cce7/52.png 200w,\n/static/36e68117c0ec77a08ca1ff2352fef164/bae5f/52.png 400w,\n/static/36e68117c0ec77a08ca1ff2352fef164/14be6/52.png 800w,\n/static/36e68117c0ec77a08ca1ff2352fef164/1b35a/52.png 1200w,\n/static/36e68117c0ec77a08ca1ff2352fef164/9ee03/52.png 1600w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>7.15 tyylit, step1</h4>\n<p>Tee sovelluksesi ulkoasusta tyylikkäämpi jotain kurssilla esiteltyä tapaa käyttäen</p>\n<h4>7.16 tyylit, step2</h4>\n<p>Jos käytät tyylien lisäämiseen noin tunnin aikaa, merkkaa myös tämä tehtävä tehdyksi.</p>\n<h4>7.17 ESLint</h4>\n<p>Konfiguroi frontend käyttämään ELintiä</p>\n<h4>7.18 Webpack</h4>\n<p>Tee sovellukselle sopiva webpack-konfiguraatio</p>\n<h4>7.19 End to end -testaus, step1</h4>\n<p>Tee sovellukselle ainakin kaksi E2E-testiä <a href=\"/osa7/luokkakomponentit_e_2_e_testaus#sovelluksen-end-to-end-testaus\">Cypress-kirjaston</a> avulla. Sopiva testattava asia on esim. käyttäjän kirjautuminen sovellukseen.</p>\n<p>Tämän tehtävän testeissä voit olettaa, että tietokannan tila on testien kannalta sopiva, eli että tietokannassa on olemassa ainakin yksi käyttäjä. </p>\n<p>Kannattanee käyttää hetki aikaa Cypressin dokumentaation silmäilemiseen, erityisesti\n<a href=\"https://docs.cypress.io/guides/references/best-practices.html\">best practices</a> sisältää monia asioita, joita on hyvä pitää mielessä testejä kirjoittaessa.</p>\n<h4>7.20 End to end -testaus, step2</h4>\n<p>Laajenna E2E-testejä siten, että testit <a href=\"/osa7/luokkakomponentit_e_2_e_testaus#tietokannan-tilan-kontrollointi\">alustavat tietokannan</a> aina ennen testien suorittamista. Tee myös ainakin yksi testi, joka muokkaa sovelluksen tietokantaa, esim. lisää sovellukseen blogin.</p>\n<h4>7.21 End to end -testaus, step3</h4>\n<p>Laajenna vielä E2E-testejäsi. Voit merkitä tehtävän, jos käytät laajentamiseen vähintään 30 minuuttia aikaa.</p>\n<h4>7.22 Kurssipalaute</h4>\n<p>Anna kurssille palautetta weboodissa.</p>\n</div>","frontmatter":{"mainImage":{"publicURL":"/static/part-7-e86c21108367fe9d9c833e8905547e9c.svg"},"part":7,"letter":"f"}}},"pageContext":{"part":7,"letter":"f"}}